{%extends "home.html" %} {% block content %} {% load static %}
<div
  class="container h-100 bg-white d-flex shadow rounded-2"
  style="margin-top: calc(60px + 3vh); margin-bottom: calc(40px); flex: 1"
>
  <div class="row g-3 row-2 w-100 px-5 py-4">
    {% include "user_tabs.html" %}
    <div class="p-3 col-lg-10 col-12">
      <h3 class="c-secondary">{{tab.name}}</h3>
      <p class="m-0 c-secondary">Description: {{tab.description}}</p>
      <p class="m-0 c-secondary">Created at: {{tab.created_at}}</p>
      <h3 class="mt-3 c-secondary">Remove user from the tab</h3>

      <form method="POST">
        {% csrf_token %} {% for user in tab_users %}
        <div class="form-check align-items-center d-flex">
          <div class="col-0">
            <input
              class="form-check-input"
              type="checkbox"
              value="{{user.id}}"
              id="check_{{user.id}}"
              name="users_to_remove"
              style="background-color: var(--white); border-color: var(--gray)"
            />
          </div>
          <label class="form-check-label" for="check_{{user.id}}">
            <div>{{user.username}}</div>
          </label>
        </div>
        {% endfor %}
        <button class="btn btn-primary px-5 py-2 border-0 mt-3" type="submit">
          Remove users
        </button>
      </form>
    </div>
  </div>
</div>
<script>
  {% for user in tab_users %}
    document.getElementById("check_{{user.id}}").addEventListener("click", () => {
      var checkbox = document.getElementById("check_{{user.id}}");
      console.log(checkbox);
      if (checkbox.checked == false) {
        checkbox.style.backgroundColor = "var(--white)";
        checkbox.style.borderColor = "var(--gray)";
      } else {
        checkbox.style.backgroundColor = "red";
        checkbox.style.borderColor = "red";
      }
    });
  {% endfor %}
</script>
{% endblock %}
